<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cusMberManageDAO">


    <resultMap id="stplatMap" type="egovframework.smart.customer.service.StplatVO">
        <result property="useStplatId" column="USE_STPLAT_ID"/>
        <result property="useStplatCn" column="USE_STPLAT_CN"/>
        <result property="infoProvdAgeCn" column="INFO_PROVD_AGRE_CN"/>
    </resultMap>
    
 <select id="selectMberList" parameterType="egovframework.smart.customer.service.CusMberManageVO" resultType="egovMap">
SELECT * FROM ( SELECT rownum rn, TB.* FROM (
    SELECT 
        CUSTOMER_ID           as "cusId",
        CUSTOMER_NAME         as "cusNm",
        CUSTOMER_AUTONO       as "autoNo",
        CUSTOMER_TEL          as "custel",
        USE_YN                as "useYN",
        NOTE                  as "note",
    FROM    CAR_CUSTOMER
    WHERE 1=1
        <if test="searchCondition == 0">
            AND CUSTOMER_TEL LIKE #{searchKeyword}
        </if>
        <if test="searchCondition == 1">
            AND CUSTOMER_AUTONO LIKE '%' ||#{searchKeyword}|| '%'
        </if>
        ORDER BY 12 DESC) 
        TB ) WHERE rn BETWEEN #{firstIndex} + 1 AND #{firstIndex} + #{recordCountPerPage}
    </select>
    
    
        <select id="selectMberListTotCnt" parameterType="egovframework.smart.customer.service.CusMberDefaultVO" resultType="int">
            SELECT COUNT(1) totcnt
            FROM   CAR_CUSTOMER
            WHERE 1=1
            <if test="searchCondition == 0">
                AND CUSTOMER_TEL LIKE #{searchKeyword}
            </if>
            <if test="searchCondition == 1">
                AND CUSTOMER_AUTONO LIKE '%' ||#{searchKeyword}|| '%'
            </if>
    </select>
    
</mapper>